/*! jQuery Selectorator - v0.1.1 - 2013-08-09
* https://github.com/ngs/jquery-selectorator
* Copyright (c) 2013 Atsushi Nagase; Licensed MIT */
!function(){!function(a){var b,c,d,e,f,g,h;return g=a.map,e=a.extend,f=a.inArray,d=function(a){return a.replace(/([\!\"\#\$\%\&'\(\)\*\+\,\.\/\:\;<\=>\?\@\[\\\]\^\`\{\|\}\~])/g,"\\$1")},c=function(a,b){return g(a,function(a){return a===b?null:a})},h=function(a){return g(a,function(b,c){return c===a.indexOf(b)?b:null})},b=function(){function b(b,c){this.element=b,this.options=e(e({},a.selectorator.options),c),this.cachedResults={}}return b.prototype.query=function(b){var c;return(c=this.cachedResults)[b]||(c[b]=a(b.replace(/#([^\s]+)/g,"[id='$1']")))},b.prototype.getProperTagName=function(){return this.element[0]?this.element[0].tagName.toLowerCase():null},b.prototype.validate=function(a,b,c,d){var e,g;if(null==c&&(c=!0),null==d&&(d=!1),g=this.query(a),c&&1<g.size()||!c&&0===g.size()){if(!b||-1!==a.indexOf(":"))return null;if(e=d?" > ":" ",a=b+e+a,g=this.query(a),c&&1<g.size()||!c&&0===g.size())return null}return-1!==f(this.element[0],g.get())?a:null},b.prototype.generate=function(){var a,b,d,e,f,g;if(a=this.element,!a||a[0]===document||"undefined"==typeof a[0].tagName)return[""];for(d=[],g=[this.generateSimple,this.generateAncestor,this.generateRecursive],e=0,f=g.length;f>e;e++)if(b=g[e],d=h(c(b.call(this))),d&&d.length>0)return d;return h(d)},b.prototype.generateAncestor=function(){var c,d,e,f,g,h,i,j,k,l,m,n,o,p;for(g=[],p=this.element.parents(),j=0,m=p.length;m>j;j++){for(d=p[j],c=!0,i=this.generateSimple(null,!1),k=0,n=i.length;n>k;k++)for(h=i[k],f=new b(a(d),this.options).generateSimple(null,!1),l=0,o=f.length;o>l;l++)e=f[l],a.merge(g,new b(a(h),this.options).generateSimple(e,!0,c));c=!1}return g},b.prototype.generateSimple=function(a,b,d){var e,f,h,i,j,k,l,m;for(h=this,i=h.getProperTagName(),j=function(c){return h.validate(c,a,b,d)},m=[[h.getIdSelector],[h.getClassSelector],[h.getIdSelector,!0],[h.getClassSelector,!0],[h.getNameSelector],[function(){return[h.getProperTagName()]}]],k=0,l=m.length;l>k;k++)if(e=m[k],f=e[0].call(h,e[1])||[],f=c(g(f,j)),f.length>0)return f;return[]},b.prototype.generateRecursive=function(){var a,c,d,e;return e=this.getProperTagName(),-1!==e.indexOf(":")&&(e="*"),c=this.element.parent(),d=new b(c).generate()[0],a=c.children(e).index(this.element),e=""+e+":eq("+a+")",""!==d&&(e=d+" > "+e),[e]},b.prototype.getIdSelector=function(a){var b;return null==a&&(a=!1),a=a?this.getProperTagName():"",b=this.element.attr("id"),"string"==typeof b?[""+a+"#"+d(b)]:null},b.prototype.getClassSelector=function(a){var b,c,e;return null==a&&(a=!1),e=this.getProperTagName(),/^(body|html)$/.test(e)?null:(a=a?e:"",c=this.options.invalidClasses||[],b=(this.element.attr("class")||"").replace(/\{.*\}/,"").split(/\s/),g(b,function(b){return b&&-1===f(b,c)?""+a+"."+d(b):null}))},b.prototype.getNameSelector=function(){var a,b;return b=this.getProperTagName(),a=this.element.attr("name"),a?[""+b+"[name='"+a+"']"]:null},b}(),a.selectorator={options:{},unique:h,clean:c,escapeSelector:d},a.fn.selectorator=function(c){return new b(a(this),c)},a.fn.getSelector=function(a){return this.selectorator(a).generate()},this}(jQuery)}.call(this);