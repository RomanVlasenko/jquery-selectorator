/*! jQuery Selectorator - v0.1.0 - 2013-08-08
* https://github.com/ngs/jquery-selectorator
* Copyright (c) 2013 Atsushi Nagase; Licensed MIT */
!function(){!function(a){var b,c,d,e,f,g;return f=a.map,e=a.extend,d=function(a){return a.replace(/([\!\"\#\$\%\&'\(\)\*\+\,\.\/\:\;<\=>\?\@\[\\\]\^\`\{\|\}\~])/g,"\\$1")},c=function(a,b){return f(a,function(a){return a===b?null:a})},g=function(a){return f(a,function(b,c){return c===a.indexOf(b)?b:null})},b=function(){function b(b,c){this.element=b,this.options=e(e({},a.selectorator.options),c),this.cachedResults={}}return b.prototype.query=function(b){var c;return(c=this.cachedResults)[b]||(c[b]=a(b))},b.prototype.getProperTagName=function(){return this.element[0]?this.element[0].tagName.toLowerCase():null},b.prototype.validate=function(b,c,d,e){var f,g;if(null==d&&(d=!0),null==e&&(e=!1),g=this.query(b),d&&1<g.size()||!d&&0===g.size()){if(!c||-1!==b.indexOf(":"))return null;if(f=e?" > ":" ",b=c+f+b,g=this.query(b),d&&1<g.size()||!d&&0===g.size())return null}return-1!==a.inArray(this.element[0],g.get())?b:null},b.prototype.generate=function(){var a,b,d,e,f,h;if(a=this.element,!a||a[0]===document||"undefined"==typeof a[0].tagName)return[""];for(d=[],h=[this.generateSimple,this.generateAncestor,this.generateRecursive],e=0,f=h.length;f>e;e++)if(b=h[e],d=c(b.call(this)),d&&d.length>0)return d;return g(d)},b.prototype.generateAncestor=function(){var c,d,e,f,g,h,i,j,k,l,m,n,o,p;for(g=[],p=this.element.parents(),j=0,m=p.length;m>j;j++){for(d=p[j],c=!0,i=this.generateSimple(null,!1),k=0,n=i.length;n>k;k++)for(h=i[k],f=new b(a(d),this.options).generateSimple(null,!1),l=0,o=f.length;o>l;l++)e=f[l],a.merge(g,new b(a(h),this.options).generateSimple(e,!0,c));c=!1}return g},b.prototype.generateSimple=function(a,b,d){var e,g,h,i,j,k,l,m;for(i=this.getProperTagName(),h=this,j=function(c){return h.validate(c,a,b,d)},m=[[this.getIdSelector],[this.getClassSelector],[this.getIdSelector,!0],[this.getClassSelector,!0],[this.getNameSelector],[function(){return[h.getProperTagName()]}]],k=0,l=m.length;l>k;k++)if(e=m[k],g=e[0].call(this,e[1])||[],g=c(f(g,j)),g.length>0)return g;return[]},b.prototype.generateRecursive=function(){var a,c,d,e;return e=this.getProperTagName(),-1!==e.indexOf(":")&&(e="*"),c=this.element.parent(),d=new b(c).generate()[0],a=c.children(e).index(this.element),e=""+e+":eq("+a+")",""!==d&&(e=d+" > "+e),[e]},b.prototype.getIdSelector=function(a){var b;return null==a&&(a=!1),a=a?this.getProperTagName():"",b=this.element.attr("id"),"string"==typeof b?[""+a+"#"+d(b)]:null},b.prototype.getClassSelector=function(b){var c,e,g;return null==b&&(b=!1),g=this.getProperTagName(),/^(body|html)$/.test(g)?null:(b=b?g:"",e=this.options.invalidClasses||[],c=(this.element.attr("class")||"").replace(/\{.*\}/,"").split(/\s/),f(c,function(c){return c&&-1===a.inArray(c,e)?""+b+"."+d(c):null}))},b.prototype.getNameSelector=function(){var a,b;return b=this.getProperTagName(),a=this.element.attr("name"),a?[""+b+"[name='"+a+"']"]:null},b}(),a.selectorator={options:{},unique:g,clean:c,escapeSelector:d},a.fn.selectorator=function(c){return new b(a(this),c)},a.fn.getSelector=function(b){return a(this).selectorator(b).generate()},this}(jQuery)}.call(this);